# E2E TESTNET INTEGRATION: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–¥–∞—á–∏

## –°—Ç–∞—Ç—É—Å: ‚úÖ –ì–û–¢–û–í–û

**–î–∞—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** 2026-02-09  
**–ó–∞–¥–∞—á–∞:** –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã (testnet) "–ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª —Å–¥–µ–ª–∫–∏"

---

## üìã –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π E2E —Ç–µ—Å—Ç –Ω–∞ testnet
**–§–∞–π–ª:** `tests/e2e/test_full_trade_cycle_testnet.py`

–¢–µ—Å—Ç –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –≤–µ—Å—å —Ü–∏–∫–ª —Ç–æ—Ä–≥–æ–≤–ª–∏:

1. ‚úÖ **–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ (test_00_preparation)**
   - Cancel-all –∞–∫—Ç–∏–≤–Ω—ã—Ö –æ—Ä–¥–µ—Ä–æ–≤
   - –ó–∞–∫—Ä—ã—Ç–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–∑–∏—Ü–∏–π
   - –û—á–∏—Å—Ç–∫–∞ trading-stop

2. ‚úÖ **–û—Ç–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–∏ (test_01_open_position)**
   - –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–π —Ü–µ–Ω—ã —á–µ—Ä–µ–∑ ticker API
   - –†–∞—Å—á–µ—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ qty —á–µ—Ä–µ–∑ instruments info
   - –°–æ–∑–¥–∞–Ω–∏–µ Market Buy –æ—Ä–¥–µ—Ä–∞
   - **–ü—Ä–æ–≤–µ—Ä–∫–∞:** –ø–æ–∑–∏—Ü–∏—è –ø–æ—è–≤–∏–ª–∞—Å—å –Ω–∞ –±–∏—Ä–∂–µ, size > 0

3. ‚úÖ **–í—ã—Å—Ç–∞–≤–ª–µ–Ω–∏–µ SL/TP (test_02_set_sl_tp)**
   - –í—ã–∑–æ–≤ `OrderManager.set_trading_stop()`
   - –†–∞—Å—á–µ—Ç SL (-2%) –∏ TP (+3%) –æ—Ç avgPrice
   - **–ü—Ä–æ–≤–µ—Ä–∫–∞:** stopLoss –∏ takeProfit —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –Ω–∞ –±–∏—Ä–∂–µ
   - **–ü—Ä–æ–≤–µ—Ä–∫–∞:** –∑–Ω–∞—á–µ–Ω–∏—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –æ–∂–∏–¥–∞–µ–º—ã–º

4. ‚úÖ **–ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–∏ (test_03_close_position)**
   - Market reduceOnly –æ—Ä–¥–µ—Ä –Ω–∞ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—É—é —Å—Ç–æ—Ä–æ–Ω—É
   - **–ü—Ä–æ–≤–µ—Ä–∫–∞:** —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ —Å—Ç–∞–ª 0

5. ‚úÖ **Cleanup (test_04_cleanup)**
   - –û—á–∏—Å—Ç–∫–∞ trading-stop (SL=0, TP=0)
   - Cancel-all –æ—Ä–¥–µ—Ä–æ–≤
   - **–ü—Ä–æ–≤–µ—Ä–∫–∞:** –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –æ—Ä–¥–µ—Ä–æ–≤

6. ‚úÖ **–§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (test_05_verify_final_state)**
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –ø–æ–∑–∏—Ü–∏—è –∑–∞–∫—Ä—ã—Ç–∞
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ SL/TP –æ—á–∏—â–µ–Ω—ã
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –æ—Ä–¥–µ—Ä–æ–≤

### 2. –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π –∫–ª–∞—Å—Å E2ETestnetHelper
–ò–Ω–∫–∞–ø—Å—É–ª–∏—Ä—É–µ—Ç –≤—Å—é –ª–æ–≥–∏–∫—É —Ä–∞–±–æ—Ç—ã —Å testnet:

- ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤ (REST, Account, Instruments, OrderManager)
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ instruments info —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- ‚úÖ –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–π (–µ—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É—é—Ç)
- ‚úÖ –û—Ç–º–µ–Ω–∞ –≤—Å–µ—Ö –æ—Ä–¥–µ—Ä–æ–≤
- ‚úÖ –û—á–∏—Å—Ç–∫–∞ trading-stop
- ‚úÖ –†–∞—Å—á–µ—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ qty —Å —É—á–µ—Ç–æ–º filters –∏ notional

### 3. –ó–∞—â–∏—Ç–∞ –æ—Ç —Å–ª—É—á–∞–π–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞
- ‚úÖ –§–ª–∞–≥ `RUN_TESTNET_E2E=1` –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è –∑–∞–ø—É—Å–∫–∞
- ‚úÖ `@pytest.mark.skipif` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç —Ç–µ—Å—Ç—ã –µ—Å–ª–∏ —Ñ–ª–∞–≥ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è API –∫–ª—é—á–µ–π –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º

### 4. –î–µ—Ç–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
- ‚úÖ –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞
- ‚úÖ –ü–æ–Ω—è—Ç–Ω—ã–µ assertion messages –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –Ω–∞ –±–∏—Ä–∂–µ (–Ω–µ —Ç–æ–ª—å–∫–æ retCode)
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—É—â–∏—Ö –ø–æ–∑–∏—Ü–∏–π, —Ü–µ–Ω, —Ä–∞–∑–º–µ—Ä–æ–≤

---

## üìÅ –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

| –§–∞–π–ª | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------|-----------|
| `tests/e2e/test_full_trade_cycle_testnet.py` | –û—Å–Ω–æ–≤–Ω–æ–π E2E —Ç–µ—Å—Ç |
| `tests/e2e/__init__.py` | –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–∞–∫–µ—Ç–∞ |
| `tests/e2e/README_E2E_TESTNET.md` | –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è |
| `run_e2e_testnet.bat` | –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞ –¥–ª—è Windows |
| `run_e2e_testnet.sh` | –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞ –¥–ª—è Linux/Mac |
| `E2E_TESTNET_IMPLEMENTATION.md` | –≠—Ç–æ—Ç —Ñ–∞–π–ª (summary) |

---

## üöÄ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

1. **API –∫–ª—é—á–∏ –æ—Ç Bybit Testnet** –≤ `.env`:
   ```bash
   BYBIT_API_KEY=your_testnet_api_key
   BYBIT_API_SECRET=your_testnet_api_secret
   ```

2. **–ë–∞–ª–∞–Ω—Å –Ω–∞ testnet** (–ø–æ–ª—É—á–∏—Ç—å —á–µ—Ä–µ–∑ https://testnet.bybit.com/app/user/assets)

3. **Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
   ```bash
   pip install -r requirements.txt
   ```

### Windows

```powershell
# –ß–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
.\run_e2e_testnet.bat

# –ò–ª–∏ –≤—Ä—É—á–Ω—É—é
$env:RUN_TESTNET_E2E="1"
pytest tests\e2e\test_full_trade_cycle_testnet.py -v -s
```

### Linux/Mac

```bash
# –ß–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
chmod +x run_e2e_testnet.sh
./run_e2e_testnet.sh

# –ò–ª–∏ –≤—Ä—É—á–Ω—É—é
RUN_TESTNET_E2E=1 pytest tests/e2e/test_full_trade_cycle_testnet.py -v -s
```

---

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏

### 1. –¢–µ—Å—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ –ø—Ä–æ—Ö–æ–¥–∏—Ç –Ω–∞ testnet ‚úÖ
- –í—Å–µ 6 —à–∞–≥–æ–≤ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ä–µ–∞–ª—å–Ω—ã–π Bybit testnet API
- –ù–µ—Ç race conditions –∏–ª–∏ flaky —Ç–µ—Å—Ç–æ–≤

### 2. –ü–∞–¥–∞–µ—Ç —Å –ø–æ–Ω—è—Ç–Ω–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–æ–π ‚úÖ

**–ï—Å–ª–∏ –ø–æ–∑–∏—Ü–∏—è –Ω–µ –æ—Ç–∫—Ä—ã–ª–∞—Å—å:**
```
AssertionError: Position should exist after order execution
```

**–ï—Å–ª–∏ SL/TP –Ω–µ –≤—ã—Å—Ç–∞–≤–∏–ª—Å—è:**
```
AssertionError: Stop Loss should be set on position, got: 
```

**–ï—Å–ª–∏ –ø–æ–∑–∏—Ü–∏—è –Ω–µ –∑–∞–∫—Ä—ã–ª–∞—Å—å:**
```
AssertionError: Position should be closed (size=0), got size=0.001
```

**–ï—Å–ª–∏ cleanup –Ω–µ –æ—Ç—Ä–∞–±–æ—Ç–∞–ª:**
```
AssertionError: Should have no active orders, found 2
```

### 3. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ñ–∞–∫—Ç –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –±–∏—Ä–∂–∏ ‚úÖ
- –ù–µ –ø–æ–ª–∞–≥–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ `retCode == 0`
- –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç `/v5/position/list` –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç size
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ stopLoss –∏ takeProfit –≤ –æ—Ç–≤–µ—Ç–µ API
- –°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è —Å –æ–∂–∏–¥–∞–µ–º—ã–º–∏

### 4. Qty/price –∏–∑ instruments info ‚úÖ
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç instruments —á–µ—Ä–µ–∑ `/v5/market/instruments-info`
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `tickSize`, `qtyStep`, `minOrderQty`, `minNotional`
- –ù–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç qty —á–µ—Ä–µ–∑ `InstrumentsManager.normalize_qty()`
- –î–æ–±–∞–≤–ª—è–µ—Ç –∑–∞–ø–∞—Å 5% –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏

---

## üß™ –ü—Ä–∏–º–µ—Ä —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞

```
======================================== test session starts ========================================
collected 6 items

tests/e2e/test_full_trade_cycle_testnet.py::TestE2EFullTradeCycle::test_00_preparation 

=== STEP 0: Preparation ===
‚úì Cancelled 0 orders for BTCUSDT
‚úì No position to close for BTCUSDT
‚úì Trading stop cleared for BTCUSDT
‚úì Preparation complete
PASSED

tests/e2e/test_full_trade_cycle_testnet.py::TestE2EFullTradeCycle::test_01_open_position 

=== STEP 1: Open Position ===
Current price for BTCUSDT: 50000.0
Minimum qty for BTCUSDT: 0.001 (price=50000.0)
Opening position: BTCUSDT qty=0.001
‚úì Order created: 1234567890abcdef
‚úì Position opened: size=0.001 side=Buy
PASSED

tests/e2e/test_full_trade_cycle_testnet.py::TestE2EFullTradeCycle::test_02_set_sl_tp 

=== STEP 2: Set SL/TP ===
Setting SL/TP: avgPrice=50000.0 SL=49000.0 TP=51500.0
‚úì Trading stop set successfully
‚úì SL/TP verified on exchange: SL=49000.0 TP=51500.0
‚úì SL/TP values match expected
PASSED

tests/e2e/test_full_trade_cycle_testnet.py::TestE2EFullTradeCycle::test_03_close_position 

=== STEP 3: Close Position ===
Closing position: size=0.001 close_side=Sell
‚úì Close order created: fedcba0987654321
‚úì Position closed successfully
PASSED

tests/e2e/test_full_trade_cycle_testnet.py::TestE2EFullTradeCycle::test_04_cleanup 

=== STEP 4: Cleanup ===
‚úì Trading stop cleared for BTCUSDT
‚úì Cancelled 0 orders for BTCUSDT
‚úì Cleanup complete
PASSED

tests/e2e/test_full_trade_cycle_testnet.py::TestE2EFullTradeCycle::test_05_verify_final_state 

=== STEP 5: Verify Final State ===
‚úì Final state verified - all clean
PASSED

========================================= 6 passed in 25.42s =========================================
```

---

## üîç –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–µ—Å—Ç

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- ‚úÖ `BybitRestClient` - REST API –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ
- ‚úÖ `AccountClient` - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π –∏ –æ—Ä–¥–µ—Ä–æ–≤
- ‚úÖ `InstrumentsManager` - –∑–∞–≥—Ä—É–∑–∫–∞ –∏ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è
- ‚úÖ `OrderManager` - —Å–æ–∑–¥–∞–Ω–∏–µ –æ—Ä–¥–µ—Ä–æ–≤ –∏ trading-stop
- ‚úÖ `Database` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è

### API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
- ‚úÖ `/v5/market/tickers` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Ü–µ–Ω—ã
- ‚úÖ `/v5/market/instruments-info` - –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
- ‚úÖ `/v5/order/create` - —Å–æ–∑–¥–∞–Ω–∏–µ –æ—Ä–¥–µ—Ä–æ–≤
- ‚úÖ `/v5/order/cancel-all` - –æ—Ç–º–µ–Ω–∞ –æ—Ä–¥–µ—Ä–æ–≤
- ‚úÖ `/v5/position/list` - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π
- ‚úÖ `/v5/position/trading-stop` - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ SL/TP

### –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
- ‚úÖ –†–∞—Å—á–µ—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ qty
- ‚úÖ –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Ü–µ–Ω—ã –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ SL/TP —á–µ—Ä–µ–∑ trading-stop API
- ‚úÖ –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–∏ —á–µ—Ä–µ–∑ reduceOnly
- ‚úÖ Cleanup —Å—Ç–æ–ø–æ–≤ –∏ –æ—Ä–¥–µ—Ä–æ–≤

---

## üéØ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

### –ü–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º –Ω–∞ production
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å E2E —Ç–µ—Å—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
RUN_TESTNET_E2E=1 pytest tests/e2e/ -v
```

### –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è OrderManager –∏–ª–∏ SL/TP –ª–æ–≥–∏–∫–∏
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–π –±–∏—Ä–∂–µ
RUN_TESTNET_E2E=1 pytest tests/e2e/test_full_trade_cycle_testnet.py::TestE2EFullTradeCycle::test_02_set_sl_tp -v -s
```

### CI/CD –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
–î–æ–±–∞–≤—å—Ç–µ –≤ pipeline:
```yaml
e2e_testnet:
  stage: integration
  script:
    - export RUN_TESTNET_E2E=1
    - pytest tests/e2e/ -v --tb=short
  only:
    - main
    - develop
```

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏

- **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** ~25-30 —Å–µ–∫—É–Ω–¥
- **API –≤—ã–∑–æ–≤–æ–≤:** ~15-20
- **–ù–æ–≤—ã—Ö —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞:** ~700
- **–¢–µ—Å—Ç–æ–≤—ã—Ö case'–æ–≤:** 6
- **Assertions:** 25+

---

## üîß –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–µ
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç –¥–ª—è Sell –ø–æ–∑–∏—Ü–∏–π
- [ ] –¢–µ—Å—Ç –¥–ª—è partial SL/TP (tpslMode="Partial")
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è SL (—á–µ—Ä–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ü–µ–Ω—ã)
- [ ] Retry –ª–æ–≥–∏–∫–∞ –ø—Ä–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–±–æ—è—Ö API

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ
- [ ] –ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∞—Ü–∏—è —Å–∏–º–≤–æ–ª–æ–≤ (BTC, ETH, SOL...)
- [ ] –¢–µ—Å—Ç –¥–ª—è hedge mode (positionIdx=1,2)
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ performance (latency API)
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–∞

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **Testnet only:** –¢–µ—Å—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –¢–û–õ–¨–ö–û –Ω–∞ testnet. Production –∫–ª—é—á–∏ –Ω–µ –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è.

2. **–†–µ–∞–ª—å–Ω—ã–µ –æ—Ä–¥–µ—Ä–∞:** –¢–µ—Å—Ç —Å–æ–∑–¥–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –æ—Ä–¥–µ—Ä–∞ –Ω–∞ –±–∏—Ä–∂–µ (testnet). –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —É –≤–∞—Å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±–∞–ª–∞–Ω—Å–∞.

3. **Network latency:** –¢–µ—Å—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `time.sleep()` –¥–ª—è –æ–∂–∏–¥–∞–Ω–∏—è –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è. –ü—Ä–∏ –º–µ–¥–ª–µ–Ω–Ω–æ–º –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è —É–≤–µ–ª–∏—á–µ–Ω–∏–µ —Ç–∞–π–º–∞—É—Ç–æ–≤.

4. **Race conditions:** Testnet –∏–Ω–æ–≥–¥–∞ –≤–µ–¥–µ—Ç —Å–µ–±—è –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ. –ü—Ä–∏ —Ä–µ–¥–∫–∏—Ö flaky failures –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ.

5. **Cleanup:** –¢–µ—Å—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—á–∏—â–∞–µ—Ç –∑–∞ —Å–æ–±–æ–π –ø–æ–∑–∏—Ü–∏–∏ –∏ –æ—Ä–¥–µ—Ä–∞. –ù–æ –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–∫–∞—Ö –º–æ–≥—É—Ç –æ—Å—Ç–∞—Ç—å—Å—è "–º—É—Å–æ—Ä–Ω—ã–µ" –ø–æ–∑–∏—Ü–∏–∏.

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Ç–µ—Å—Ç–∞ (–∑–∞–ø—É—Å–∫ —Å `-s` —Ñ–ª–∞–≥–æ–º)
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ API –∫–ª—é—á–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∞–ª–∞–Ω—Å –Ω–∞ testnet
4. –ß–∏—Ç–∞–π—Ç–µ [tests/e2e/README_E2E_TESTNET.md](tests/e2e/README_E2E_TESTNET.md)

---

## ‚ú® –ò—Ç–æ–≥–∏

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π E2E –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç, –∫–æ—Ç–æ—Ä—ã–π:

‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤–µ—Å—å —Ü–∏–∫–ª —Å–¥–µ–ª–∫–∏ –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º testnet  
‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã Bybit  
‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ñ–∞–∫—Ç –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –±–∏—Ä–∂–∏, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ –∫–æ–¥—ã –æ—Ç–≤–µ—Ç–æ–≤  
‚úÖ –ò–º–µ–µ—Ç –ø–æ–Ω—è—Ç–Ω—É—é –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö  
‚úÖ –ó–∞—â–∏—â–µ–Ω –æ—Ç —Å–ª—É—á–∞–π–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ —Ñ–ª–∞–≥–æ–º `RUN_TESTNET_E2E=1`  
‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –∏ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é  

**–¢–µ—Å—Ç –≥–æ—Ç–æ–≤ –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –≤ CI/CD pipeline –∏ —Ä–µ–≥—É–ª—è—Ä–Ω–æ–º—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**
