# UI –ö–æ–Ω—Ç—Ä–æ–ª—å Daily Loss Limit

## –û–±–∑–æ—Ä

–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –∏–∑–º–µ–Ω—è—Ç—å –ª–∏–º–∏—Ç daily loss (–¥–Ω–µ–≤–Ω—ã—Ö —É–±—ã—Ç–∫–æ–≤) –ø—Ä—è–º–æ –∏–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥!

## –ì–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –±–æ—Ç–∞ (–æ–±—ã—á–Ω–æ http://localhost:8000)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **"–ù–∞—Å—Ç—Ä–æ–π–∫–∏"**
3. –í —Å–µ–∫—Ü–∏–∏ **"–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∏—Å–∫–∞–º–∏"** –Ω–∞–π–¥–∏—Ç–µ –ø–æ–ª–µ **"Daily Loss Limit (%)"**

## –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞

1. –í–≤–µ–¥–∏—Ç–µ –∂–µ–ª–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –ø–æ–ª–µ "Daily Loss Limit (%)"
2. –î–æ–ø—É—Å—Ç–∏–º—ã–π –¥–∏–∞–ø–∞–∑–æ–Ω: **0.5% - 20%**
3. –®–∞–≥ –∏–∑–º–µ–Ω–µ–Ω–∏—è: **0.5%**
4. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"**

### –ü—Ä–∏–º–µ—Ä—ã –∑–Ω–∞—á–µ–Ω–∏–π

- **0.5%** - –û—á–µ–Ω—å –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–æ (–∞–≤—Ç–æ-—Å—Ç–æ–ø –ø—Ä–∏ $50 —É–±—ã—Ç–∫–∞ –Ω–∞ $10,000 —Å—á—ë—Ç–µ)
- **3.0%** - –ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–æ (–∞–≤—Ç–æ-—Å—Ç–æ–ø –ø—Ä–∏ $300 —É–±—ã—Ç–∫–∞ –Ω–∞ $10,000 —Å—á—ë—Ç–µ)
- **5.0%** - –£–º–µ—Ä–µ–Ω–Ω–æ (DEFAULT, –∞–≤—Ç–æ-—Å—Ç–æ–ø –ø—Ä–∏ $500 —É–±—ã—Ç–∫–∞ –Ω–∞ $10,000 —Å—á—ë—Ç–µ)
- **10.0%** - –ê–≥—Ä–µ—Å—Å–∏–≤–Ω–æ (–∞–≤—Ç–æ-—Å—Ç–æ–ø –ø—Ä–∏ $1,000 —É–±—ã—Ç–∫–∞ –Ω–∞ $10,000 —Å—á—ë—Ç–µ)
- **20.0%** - –û—á–µ–Ω—å –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ (–∞–≤—Ç–æ-—Å—Ç–æ–ø –ø—Ä–∏ $2,000 —É–±—ã—Ç–∫–∞ –Ω–∞ $10,000 —Å—á—ë—Ç–µ)

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### API Endpoints

**GET `/api/risk/daily_loss_limit`**
```json
{
  "status": "success",
  "daily_loss_limit_percent": 5.0,
  "timestamp": "2026-02-08T04:55:00.000Z"
}
```

**POST `/api/risk/daily_loss_limit`**
```json
{
  "value": 3.0
}
```

Response:
```json
{
  "status": "success",
  "message": "Daily loss limit —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞ 3.0%",
  "daily_loss_limit_percent": 3.0,
  "timestamp": "2026-02-08T04:55:00.000Z"
}
```

### –•—Ä–∞–Ω–µ–Ω–∏–µ

–ó–Ω–∞—á–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:
```python
db.save_config("daily_loss_limit_percent", 3.0)
```

### –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –±–æ—Ç–∞

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –±–æ—Ç —á–∏—Ç–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –ë–î:
```python
daily_loss_limit = db.get_config("daily_loss_limit_percent", 5.0)
```

–≠—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤:
1. `AdvancedRiskLimits` - –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ª–∏–º–∏—Ç–æ–≤
2. `RiskMonitorService` - –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —á–µ—Ä–µ–∑ UI:
1. –ó–Ω–∞—á–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î
2. Broadcast —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤—Å–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–º WebSocket –∫–ª–∏–µ–Ω—Ç–∞–º
3. **–í–ê–ñ–ù–û**: –ò–∑–º–µ–Ω–µ–Ω–∏–µ –≤—Å—Ç—É–ø–∏—Ç –≤ —Å–∏–ª—É –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –∑–∞–ø—É—Å–∫–µ –±–æ—Ç–∞

‚ö†Ô∏è **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –ß—Ç–æ–±—ã –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–∏–º–µ–Ω–∏–ª–æ—Å—å –∫ —Ä–∞–±–æ—Ç–∞—é—â–µ–º—É –±–æ—Ç—É, –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞.

## –í–∞–ª–∏–¥–∞—Ü–∏—è

### –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è (HTML)
```html
<input type="number" 
       min="0.5" 
       max="20" 
       step="0.5" 
       id="settingDailyLossLimit">
```

### –°–µ—Ä–≤–µ—Ä–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è (API)
```python
if value < 0.5 or value > 20:
    return {"status": "error", "message": "must be between 0.5 and 20"}
```

### JavaScript –≤–∞–ª–∏–¥–∞—Ü–∏—è
```javascript
if (dailyLossLimit >= 0.5 && dailyLossLimit <= 20) {
    // Save
} else {
    showNotification('Daily Loss Limit –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –º–µ–∂–¥—É 0.5% –∏ 20%', 'warning');
}
```

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–∞—è —Ç–æ—Ä–≥–æ–≤–ª—è
```
Daily Loss Limit: 2%
–°—á—ë—Ç: $5,000
–ú–∞–∫—Å —É–±—ã—Ç–æ–∫: $100/–¥–µ–Ω—å
```

### –ü—Ä–∏–º–µ—Ä 2: –£–º–µ—Ä–µ–Ω–Ω–∞—è —Ç–æ—Ä–≥–æ–≤–ª—è (default)
```
Daily Loss Limit: 5%
–°—á—ë—Ç: $10,000
–ú–∞–∫—Å —É–±—ã—Ç–æ–∫: $500/–¥–µ–Ω—å
```

### –ü—Ä–∏–º–µ—Ä 3: –ê–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è —Ç–æ—Ä–≥–æ–≤–ª—è
```
Daily Loss Limit: 15%
–°—á—ë—Ç: $20,000
–ú–∞–∫—Å —É–±—ã—Ç–æ–∫: $3,000/–¥–µ–Ω—å
```

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **2-3%** –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- –≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç —É—á–∏—Ç—å—Å—è –Ω–∞ –æ—à–∏–±–∫–∞—Ö –±–µ–∑ –±–æ–ª—å—à–∏—Ö –ø–æ—Ç–µ—Ä—å

### –î–ª—è –æ–ø—ã—Ç–Ω—ã—Ö —Ç—Ä–µ–π–¥–µ—Ä–æ–≤
- **5-7%** - –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É –≥–∏–±–∫–æ—Å—Ç—å—é –∏ –∑–∞—â–∏—Ç–æ–π
- –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–∂–∏—Ç—å –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å –±–µ–∑ —á–∞—Å—Ç—ã—Ö –æ—Å—Ç–∞–Ω–æ–≤–æ–∫

### –î–ª—è –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π
- **10-15%** - –µ—Å–ª–∏ —É–≤–µ—Ä–µ–Ω—ã –≤ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∏ –≥–æ—Ç–æ–≤—ã –∫ —Ä–∏—Å–∫–∞–º
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ —Å –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–º–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è–º–∏ –Ω–∞ backtests

### –ù–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è
- **–í—ã—à–µ 20%** - —Å–ª–∏—à–∫–æ–º —Ä–∏—Å–∫–æ–≤–∞–Ω–Ω–æ, –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–º –ø–æ—Ç–µ—Ä—è–º
- **–ù–∏–∂–µ 0.5%** - —Å–ª–∏—à–∫–æ–º –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–æ, –±–æ—Ç –±—É–¥–µ—Ç –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å—Å—è —Å–ª–∏—à–∫–æ–º —á–∞—Å—Ç–æ

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–æ–≤–æ–≥–æ –ª–∏–º–∏—Ç–∞ –≤—ã —É–≤–∏–¥–∏—Ç–µ –≤ –ª–æ–≥–∞—Ö –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ:

```
INFO | Daily loss limit loaded from config: 3.0%
INFO | RiskMonitorService initialized
INFO |   –ê–ö–¢–ò–í–ù–ê –¢–û–õ–¨–ö–û –ü–†–û–í–ï–†–ö–ê: Daily Loss > 3.0%
INFO |   –û—Å—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –û–¢–ö–õ–Æ–ß–ï–ù–´ (leverage, notional, drawdown, orders)
```

–ü—Ä–∏ –ø—Ä–∏–±–ª–∏–∂–µ–Ω–∏–∏ –∫ –ª–∏–º–∏—Ç—É:
```
WARNING | Risk evaluation: DENY - Daily Loss approaching limit
INFO | Risk Check: decision=deny, equity=$9700.00, pnl_today=$-280.00
```

–ü—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏:
```
CRITICAL | Risk evaluation: STOP - CRITICAL violations: Daily Loss
CRITICAL | üö® TRIGGERING KILL SWITCH: Critical risk violations: Daily Loss
```

## Troubleshooting

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –Ω–∞–∂–∞–ª–∏ –∫–Ω–æ–ø–∫—É "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞ –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –±–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ **live** —Ä–µ–∂–∏–º–µ (–≤ paper/backtest —Ä–µ–∂–∏–º–∞—Ö —Ä–∏—Å–∫-–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–µ –∞–∫—Ç–∏–≤–µ–Ω)

### –ó–Ω–∞—á–µ–Ω–∏–µ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ 5%
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω–∏–ª–æ—Å—å –≤ –ë–î:
  ```bash
  sqlite3 storage/bot_state.db "SELECT * FROM config WHERE key='daily_loss_limit_percent';"
  ```
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è

### –ë–æ—Ç –Ω–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ —É–±—ã—Ç–∫–∞—Ö
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ `enable_daily_loss_check=True` –≤ –∫–æ–¥–µ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ `enable_auto_kill_switch=True` –≤ RiskMonitorConfig
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –±–æ—Ç –≤ **live** —Ä–µ–∂–∏–º–µ

## –°–º. —Ç–∞–∫–∂–µ

- `KILL_SWITCH_SETTINGS.md` - –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö kill switch
- `HOWTO_RESET_KILLSWITCH.md` - –ö–∞–∫ —Å–±—Ä–æ—Å–∏—Ç—å kill switch –ø–æ—Å–ª–µ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
- `FINAL_KILLSWITCH_FIX.md` - –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã kill switch
