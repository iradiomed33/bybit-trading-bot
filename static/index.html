<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bybit Trading Bot - Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <link href="/static/css/style.css" rel="stylesheet">
</head>
<body>
    <div class="container-fluid">
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top">
            <div class="container-fluid">
                <a class="navbar-brand" href="#">
                    <i class="bi bi-robot"></i> Trading Bot
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ms-auto gap-3">
                        <li class="nav-item">
                            <span class="nav-link" id="connectionStatus">
                                <span class="badge bg-danger">Offline</span>
                            </span>
                        </li>
                        <li class="nav-item">
                            <span class="nav-link" id="currentTime"></span>
                        </li>
                        <li class="nav-item">
                            <span class="nav-link" id="userInfo">
                                üë§ Guest
                            </span>
                        </li>
                        <li class="nav-item">
                            <button class="btn btn-sm btn-outline-danger" id="logoutBtn" onclick="logout()" style="display: none;">
                                <i class="bi bi-box-arrow-right"></i> Logout
                            </button>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>

        <div class="row mt-4">
            <!-- –õ–µ–≤–∞—è –±–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å -->
            <div class="col-md-2">
                <div class="d-flex flex-column gap-2">
                    <button class="btn btn-primary active" data-tab="dashboard">
                        <i class="bi bi-speedometer2"></i> Dashboard
                    </button>
                    <button class="btn btn-outline-primary" data-tab="settings">
                        <i class="bi bi-gear"></i> –ù–∞—Å—Ç—Ä–æ–π–∫–∏
                    </button>
                    <button class="btn btn-outline-primary" data-tab="history">
                        <i class="bi bi-clock-history"></i> –ò—Å—Ç–æ—Ä–∏—è
                    </button>
                    <button class="btn btn-outline-primary" data-tab="signals-log">
                        <i class="bi bi-bug"></i> –õ–æ–≥–∏ –°–∏–≥–Ω–∞–ª–æ–≤
                    </button>
                    <button class="btn btn-outline-primary" data-tab="account">
                        <i class="bi bi-wallet2"></i> –ê–∫–∫–∞—É–Ω—Ç
                    </button>
                </div>
            </div>

            <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
            <div class="col-md-10">
                <!-- DASHBOARD TAB -->
                <div id="dashboard" class="tab-content active">
                    <h2 class="mb-4">Dashboard</h2>

                    <!-- –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–æ—Ç–æ–º -->
                    <div class="row mb-4">
                        <div class="col-md-12">
                            <div class="btn-group" role="group">
                                <button type="button" class="btn btn-success btn-lg" id="startBotBtn" onclick="startBot()">
                                    <i class="bi bi-play-fill"></i> –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞
                                </button>
                                <button type="button" class="btn btn-danger btn-lg" id="stopBotBtn" onclick="stopBot()" disabled>
                                    <i class="bi bi-stop-fill"></i> –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–æ—Ç–∞
                                </button>
                            </div>
                            <div id="botStatusMessage" class="mt-2"></div>
                        </div>
                    </div>

                    <!-- –°—Ç–∞—Ç—É—Å –±–æ—Ç–∞ -->
                    <div class="row mb-4">
                        <div class="col-md-3">
                            <div class="card">
                                <div class="card-body">
                                    <h6 class="card-title">–†–µ–∂–∏–º</h6>
                                    <p class="card-text fs-5" id="botMode">-</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card">
                                <div class="card-body">
                                    <h6 class="card-title">–°–∏–º–≤–æ–ª</h6>
                                    <p class="card-text fs-5" id="botSymbol">-</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card">
                                <div class="card-body">
                                    <h6 class="card-title">–°—Ç–∞—Ç—É—Å</h6>
                                    <p class="card-text fs-5">
                                        <span class="badge bg-warning" id="botStatus">Stopped</span>
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card">
                                <div class="card-body">
                                    <h6 class="card-title">–†–∏—Å–∫</h6>
                                    <p class="card-text fs-5" id="riskPercent">-</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- –ë–∞–ª–∞–Ω—Å -->
                    <div class="row mb-4">
                        <div class="col-md-4">
                            <div class="card bg-success text-white">
                                <div class="card-body">
                                    <h6 class="card-title">–ë–∞–ª–∞–Ω—Å</h6>
                                    <p class="card-text fs-5" id="totalBalance">$0.00</p>
                                    <small>–í—Å–µ–≥–æ</small>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card bg-info text-white">
                                <div class="card-body">
                                    <h6 class="card-title">PnL</h6>
                                    <p class="card-text fs-5" id="unrealizedPnl">$0.00</p>
                                    <small>–ù–µ—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è</small>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card bg-secondary text-white">
                                <div class="card-body">
                                    <h6 class="card-title">–ü–æ–∑–∏—Ü–∏–∏</h6>
                                    <p class="card-text fs-5" id="positionCount">0</p>
                                    <small>–û—Ç–∫—Ä—ã—Ç—ã—Ö</small>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–æ—Ä–≥–æ–≤–ª–∏ -->
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header bg-primary text-white">
                                    <h6 class="mb-0">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∏–≥–Ω–∞–ª–æ–≤</h6>
                                </div>
                                <div class="card-body">
                                    <div id="signalStats">
                                        <p class="text-muted">–ó–∞–≥—Ä—É–∑–∫–∞...</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header bg-primary text-white">
                                    <h6 class="mb-0">–ü–æ—Å–ª–µ–¥–Ω–∏–µ —Å–∏–≥–Ω–∞–ª—ã</h6>
                                </div>
                                <div class="card-body">
                                    <div id="recentSignals" style="max-height: 300px; overflow-y: auto;">
                                        <p class="text-muted">–ó–∞–≥—Ä—É–∑–∫–∞...</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- SETTINGS TAB -->
                <div id="settings" class="tab-content" style="display: none;">
                    <h2 class="mb-4">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>

                    <!-- Basic Settings -->
                    <h4 class="mb-3">–û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</h4>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header bg-primary text-white">
                                    <h6 class="mb-0">–¢–æ—Ä–≥–æ–≤–ª—è</h6>
                                </div>
                                <div class="card-body">
                                    <div class="mb-3">
                                        <label class="form-label">
                                            –¢–æ—Ä–≥–æ–≤—ã–µ –ü–∞—Ä—ã
                                            <i class="bi bi-question-circle text-muted" data-bs-toggle="tooltip" data-bs-placement="top" title="–°–ø–∏—Å–æ–∫ —Ç–æ—Ä–≥–æ–≤—ã—Ö –ø–∞—Ä –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞. –ë–æ—Ç –±—É–¥–µ—Ç –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–∏ –ø–∞—Ä—ã –∏ –∏—Å–∫–∞—Ç—å —Å–∏–≥–Ω–∞–ª—ã –Ω–∞ –≤—Ö–æ–¥"></i>
                                        </label>
                                        <input type="text" class="form-control" id="settingSymbols" 
                                               placeholder="BTCUSDT, ETHUSDT, SOLUSDT">
                                        <small class="form-text text-muted">–ü–∞—Ä—ã —Ä–∞–∑–¥–µ–ª—è–π –∑–∞–ø—è—Ç–æ–π –∏ –ø—Ä–æ–±–µ–ª–æ–º</small>
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">
                                            –¢–∞–π–º—Ñ—Ä–µ–π–º (–º–∏–Ω—É—Ç)
                                            <i class="bi bi-question-circle text-muted" data-bs-toggle="tooltip" data-bs-placement="top" title="–í—Ä–µ–º–µ–Ω–Ω–æ–π –∏–Ω—Ç–µ—Ä–≤–∞–ª —Å–≤–µ—á–µ–π –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞. –ú–µ–Ω—å—à–∏–π —Ç–∞–π–º—Ñ—Ä–µ–π–º = –±–æ–ª—å—à–µ —Å–∏–≥–Ω–∞–ª–æ–≤, –Ω–æ –≤—ã—à–µ —à—É–º"></i>
                                        </label>
                                        <select class="form-select" id="settingTimeframe">
                                            <option value="1">1 –º–∏–Ω</option>
                                            <option value="5">5 –º–∏–Ω</option>
                                            <option value="15">15 –º–∏–Ω</option>
                                            <option value="60">1 —á–∞—Å</option>
                                            <option value="240">4 —á–∞—Å–∞</option>
                                            <option value="D">1 –¥–µ–Ω—å</option>
                                        </select>
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">
                                            –†–µ–∂–∏–º
                                            <i class="bi bi-question-circle text-muted" data-bs-toggle="tooltip" data-bs-placement="top" title="Paper - –≤–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è —Ç–æ—Ä–≥–æ–≤–ª—è –±–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–µ–Ω–µ–≥. Live - real trading —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ —Å—Ä–µ–¥—Å—Ç–≤–∞–º–∏"></i>
                                        </label>
                                        <select class="form-select" id="settingMode">
                                            <option value="paper">Paper</option>
                                            <option value="live">Live</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header bg-primary text-white">
                                    <h6 class="mb-0">–†–∏—Å–∫-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç</h6>
                                </div>
                                <div class="card-body">
                                    <div class="mb-3">
                                        <label class="form-label">
                                            –ú–∞–∫—Å. –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π
                                            <i class="bi bi-question-circle text-muted" data-bs-toggle="tooltip" data-bs-placement="top" title="–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ. –õ–∏–º–∏—Ç–∏—Ä—É–µ—Ç —Ä–∏—Å–∫ –ø–æ—Ä—Ç—Ñ–µ–ª—è –∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∫–∞–ø–∏—Ç–∞–ª"></i>
                                        </label>
                                        <input type="number" class="form-control" id="settingMaxPositions" min="1" max="10" step="1" value="3">
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">
                                            –ú–∞–∫—Å. –æ–±—â–∞—è —ç–∫—Å–ø–æ–∑–∏—Ü–∏—è (USDT)
                                            <i class="bi bi-question-circle text-muted" data-bs-toggle="tooltip" data-bs-placement="top" title="–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –æ–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –≤—Å–µ—Ö –ø–æ–∑–∏—Ü–∏–π. –û–±—â–∏–π –Ω–æ—Ç–∏–æ–Ω–∞–ª = —Å—É–º–º–∞ (—Ü–µ–Ω–∞ √ó —Ä–∞–∑–º–µ—Ä √ó –ø–ª–µ—á–æ) –ø–æ –≤—Å–µ–º –ø–æ–∑–∏—Ü–∏—è–º"></i>
                                        </label>
                                        <input type="number" class="form-control" id="settingMaxTotalNotional" min="1000" max="1000000" step="1000" value="100000">
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">
                                            –†–∏—Å–∫-–ø—Ä–æ—Ñ–∏–ª—å
                                            <i class="bi bi-question-circle text-muted" data-bs-toggle="tooltip" data-bs-placement="top" title="–ü—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –Ω–∞–±–æ—Ä –ø–æ—Ä–æ–≥–æ–≤ —Ä–∏—Å–∫–∞. Conservative = –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∏—Å–∫, Aggressive = –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ—Å—Ç—å"></i>
                                        </label>
                                        <select class="form-select" id="settingRiskProfile">
                                            <option value="Conservative">Conservative</option>
                                            <option value="Balanced" selected>Balanced</option>
                                            <option value="Aggressive">Aggressive</option>
                                        </select>
                                        <small class="form-text text-muted">–ü—Ä–æ—Ñ–∏–ª—å –º–µ–Ω—è–µ—Ç –ø–æ—Ä–æ–≥–∏ –≤ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row mt-3">
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header bg-primary text-white">
                                    <h6 class="mb-0">–ò—Å–ø–æ–ª–Ω–µ–Ω–∏–µ</h6>
                                </div>
                                <div class="card-body">
                                    <div class="mb-3">
                                        <label class="form-label">
                                            –¢–∏–ø –æ—Ä–¥–µ—Ä–∞
                                            <i class="bi bi-question-circle text-muted" data-bs-toggle="tooltip" data-bs-placement="top" title="Market = –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–æ —Ç–µ–∫—É—â–µ–π —Ü–µ–Ω–µ. Limit = –æ—Ä–¥–µ—Ä –ø–æ –∑–∞–¥–∞–Ω–Ω–æ–π —Ü–µ–Ω–µ —Å –æ–∂–∏–¥–∞–Ω–∏–µ–º –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è"></i>
                                        </label>
                                        <select class="form-select" id="settingOrderType">
                                            <option value="market">Market</option>
                                            <option value="limit" selected>Limit</option>
                                        </select>
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">
                                            Time in Force
                                            <i class="bi bi-question-circle text-muted" data-bs-toggle="tooltip" data-bs-placement="top" title="GTC = –æ—Ä–¥–µ—Ä –∞–∫—Ç–∏–≤–µ–Ω –ø–æ–∫–∞ –Ω–µ –∏—Å–ø–æ–ª–Ω–µ–Ω –∏–ª–∏ –æ—Ç–º–µ–Ω–µ–Ω. IOC = –∏—Å–ø–æ–ª–Ω–∏—Ç—å –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –∏–ª–∏ –æ—Ç–º–µ–Ω–∏—Ç—å. FOK = –∏—Å–ø–æ–ª–Ω–∏—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–ª–∏ –æ—Ç–º–µ–Ω–∏—Ç—å"></i>
                                        </label>
                                        <select class="form-select" id="settingTimeInForce">
                                            <option value="GTC" selected>GTC (Good Till Cancel)</option>
                                            <option value="IOC">IOC (Immediate or Cancel)</option>
                                            <option value="FOK">FOK (Fill or Kill)</option>
                                        </select>
                                    </div>
                                    <div class="mb-3 form-check">
                                        <input type="checkbox" class="form-check-input" id="settingPostOnly">
                                        <label class="form-check-label" for="settingPostOnly">
                                            Post-only (—Ç–æ–ª—å–∫–æ –º–µ–π–∫–µ—Ä)
                                            <i class="bi bi-question-circle text-muted" data-bs-toggle="tooltip" data-bs-placement="top" title="–û—Ä–¥–µ—Ä –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ —Å—Ç–∞–∫–∞–Ω –∫–∞–∫ maker (–ø–æ–ª—É—á–∞–µ—à—å rebate). –ï—Å–ª–∏ –∏—Å–ø–æ–ª–Ω–∏—Ç—Å—è –∫–∞–∫ taker, –±—É–¥–µ—Ç –æ—Ç–º–µ–Ω–µ–Ω"></i>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header bg-primary text-white">
                                    <h6 class="mb-0">Kill-Switch</h6>
                                </div>
                                <div class="card-body">
                                    <div class="mb-3">
                                        <label class="form-label">
                                            –õ–∏–º–∏—Ç –¥–Ω–µ–≤–Ω—ã—Ö –ø–æ—Ç–µ—Ä—å (%)
                                            <i class="bi bi-question-circle text-muted" data-bs-toggle="tooltip" data-bs-placement="top" title="–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –¥–æ–ø—É—Å—Ç–∏–º—ã–µ —É–±—ã—Ç–∫–∏ –∑–∞ –¥–µ–Ω—å –≤ % –æ—Ç –±–∞–ª–∞–Ω—Å–∞. –ü—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –±–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è"></i>
                                        </label>
                                        <input type="number" class="form-control" id="settingDailyLossLimit" min="0.5" max="20" step="0.5" value="5.0">
                                        <small class="form-text text-muted">–ü—Ä–æ—Ü–µ–Ω—Ç –æ—Ç –±–∞–ª–∞–Ω—Å–∞</small>
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">
                                            –ú–∞–∫—Å. –ø–æ–¥—Ä—è–¥ –æ—à–∏–±–æ–∫
                                            <i class="bi bi-question-circle text-muted" data-bs-toggle="tooltip" data-bs-placement="top" title="–ü–æ—Å–ª–µ —Å—Ç–æ–ª—å–∫–∏—Ö –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –æ—à–∏–±–æ–∫ –±–æ—Ç —É—Ö–æ–¥–∏—Ç –≤ cooldown. –ó–∞—â–∏—Ç–∞ –æ—Ç —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º –∏–ª–∏ API —Å–±–æ–µ–≤"></i>
                                        </label>
                                        <input type="number" class="form-control" id="settingMaxConsecErrors" min="1" max="20" step="1" value="5">
                                        <small class="form-text text-muted">–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –±–æ—Ç —É—Ö–æ–¥–∏—Ç –≤ cooldown</small>
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">
                                            Cooldown (–º–∏–Ω—É—Ç)
                                            <i class="bi bi-question-circle text-muted" data-bs-toggle="tooltip" data-bs-placement="top" title="–í—Ä–µ–º—è –ø–∞—É–∑—ã –ø–æ—Å–ª–µ –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è –ª–∏–º–∏—Ç–∞ –æ—à–∏–±–æ–∫. –ë–æ—Ç –Ω–µ –±—É–¥–µ—Ç —Ç–æ—Ä–≥–æ–≤–∞—Ç—å, –Ω–æ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥"></i>
                                        </label>
                                        <input type="number" class="form-control" id="settingCooldownMinutes" min="1" max="120" step="1" value="15">
                                        <small class="form-text text-muted">–í—Ä–µ–º—è –ø–∞—É–∑—ã –ø–æ—Å–ª–µ –º–∞–∫—Å. –æ—à–∏–±–æ–∫</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Advanced Settings (collapsible) -->
                    <div class="row mt-4">
                        <div class="col-12">
                            <div class="card">
                                <div class="card-header bg-secondary text-white" style="cursor: pointer;" data-bs-toggle="collapse" data-bs-target="#advancedSettings">
                                    <h5 class="mb-0">
                                        <i class="bi bi-gear-fill"></i> –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                                        <i class="bi bi-chevron-down float-end"></i>
                                    </h5>
                                </div>
                                <div class="collapse" id="advancedSettings">
                                    <div class="card-body">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <h6 class="mb-3">–î–µ—Ç–µ–∫—Ü–∏—è —Ä–µ–∂–∏–º–æ–≤ —Ä—ã–Ω–∫–∞</h6>
                                                <div class="mb-3">
                                                    <label class="form-label">
                                                        High Vol Event ATR (%)
                                                        <i class="bi bi-question-circle text-muted" data-bs-toggle="tooltip" data-bs-placement="top" title="–ü–æ—Ä–æ–≥ ATR –≤ % –æ—Ç —Ü–µ–Ω—ã –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ä–µ–∂–∏–º–∞ –≤—ã—Å–æ–∫–æ–π –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏. –ü—Ä–∏ –≤—ã—Å–æ–∫–æ–π –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏ —É—Å–ª–æ–≤–∏—è –≤—Ö–æ–¥–∞ —É–∂–µ—Å—Ç–æ—á–∞—é—Ç—Å—è"></i>
                                                    </label>
                                                    <input type="number" class="form-control advanced-input" id="settingHighVolEventAtr" min="1" max="20" step="0.5" value="7.0">
                                                    <small class="form-text text-muted">–ü–æ—Ä–æ–≥ ATR% –¥–ª—è —Ä–µ–∂–∏–º–∞ –≤—ã—Å–æ–∫–æ–π –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏</small>
                                                </div>
                                                
                                                <h6 class="mb-3 mt-4">No-Trade Zones</h6>
                                                <div class="mb-3">
                                                    <label class="form-label">
                                                        Max ATR (%)
                                                        <i class="bi bi-question-circle text-muted" data-bs-toggle="tooltip" data-bs-placement="top" title="–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –¥–æ–ø—É—Å—Ç–∏–º—ã–π ATR –≤ % –æ—Ç —Ü–µ–Ω—ã. –í—ã—à–µ —ç—Ç–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è —Ç–æ—Ä–≥–æ–≤–ª—è –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –∏–∑-–∑–∞ —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω–æ–π –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏"></i>
                                                    </label>
                                                    <input type="number" class="form-control advanced-input" id="settingNoTradeMaxAtr" min="5" max="30" step="1" value="14.0">
                                                    <small class="form-text text-muted">–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π ATR% –¥–ª—è —Ç–æ—Ä–≥–æ–≤–ª–∏</small>
                                                </div>
                                                <div class="mb-3">
                                                    <label class="form-label">
                                                        Max Spread (%)
                                                        <i class="bi bi-question-circle text-muted" data-bs-toggle="tooltip" data-bs-placement="top" title="–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –¥–æ–ø—É—Å—Ç–∏–º—ã–π —Å–ø—Ä–µ–¥ –º–µ–∂–¥—É bid –∏ ask –≤ % –æ—Ç —Ü–µ–Ω—ã. –®–∏—Ä–æ–∫–∏–π —Å–ø—Ä–µ–¥ = –ø–ª–æ—Ö–∞—è –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å –∏ –≤—ã—Å–æ–∫–∏–µ –∏–∑–¥–µ—Ä–∂–∫–∏ –≤—Ö–æ–¥–∞"></i>
                                                    </label>
                                                    <input type="number" class="form-control advanced-input" id="settingNoTradeMaxSpread" min="0.1" max="5" step="0.1" value="0.5">
                                                    <small class="form-text text-muted">–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Å–ø—Ä–µ–¥ –¥–ª—è —Ç–æ—Ä–≥–æ–≤–ª–∏</small>
                                                </div>
                                            </div>
                                            
                                            <div class="col-md-6">
                                                <h6 class="mb-3">–ö–∞—á–µ—Å—Ç–≤–æ –¥–∞–Ω–Ω—ã—Ö</h6>
                                                <div class="mb-3">
                                                    <label class="form-label">
                                                        Orderbook Sanity Check (%)
                                                        <i class="bi bi-question-circle text-muted" data-bs-toggle="tooltip" data-bs-placement="top" title="–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ bid/ask –æ—Ç —Ü–µ–Ω—ã —Å–≤–µ—á–∏ –≤ %. –ó–∞—â–∏—Ç–∞ –æ—Ç —Å–±–æ–µ–≤ –≤ —Å—Ç–∞–∫–∞–Ω–µ –∏ –∞–Ω–æ–º–∞–ª—å–Ω—ã—Ö —Ü–µ–Ω. –ù–∞ testnet —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 5-10%"></i>
                                                    </label>
                                                    <input type="number" class="form-control advanced-input" id="settingOrderbookSanity" min="1" max="10" step="0.5" value="3.0">
                                                    <small class="form-text text-muted">–ú–∞–∫—Å. –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ —Å—Ç–∞–∫–∞–Ω–∞ –æ—Ç —Ü–µ–Ω—ã —Å–≤–µ—á–∏</small>
                                                </div>
                                                
                                                <h6 class="mb-3 mt-4">Multi-Timeframe Analysis</h6>
                                                <div class="mb-3 form-check">
                                                    <input type="checkbox" class="form-check-input advanced-input" id="settingUseMTF">
                                                    <label class="form-check-label" for="settingUseMTF">
                                                        –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å MTF Confluence
                                                        <i class="bi bi-question-circle text-muted" data-bs-toggle="tooltip" data-bs-placement="top" title="Multi-Timeframe –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–æ–≤ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —Ç–∞–π–º—Ñ—Ä–µ–π–º–∞—Ö. –ü–æ–≤—ã—à–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ —Å–∏–≥–Ω–∞–ª–æ–≤, –Ω–æ —Å–Ω–∏–∂–∞–µ—Ç –∏—Ö —á–∞—Å—Ç–æ—Ç—É"></i>
                                                    </label>
                                                </div>
                                                <div class="mb-3">
                                                    <label class="form-label">
                                                        MTF Score Threshold
                                                        <i class="bi bi-question-circle text-muted" data-bs-toggle="tooltip" data-bs-placement="top" title="–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π MTF-—Å–∫–æ—Ä –¥–ª—è –≤—Ö–æ–¥–∞ (0..1). –ß–µ–º –≤—ã—à–µ –∑–Ω–∞—á–µ–Ω–∏–µ, —Ç–µ–º —Å—Ç—Ä–æ–∂–µ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤. 0.65 = —Ö–æ—Ä–æ—à–∏–π –±–∞–ª–∞–Ω—Å –∫–∞—á–µ—Å—Ç–≤–∞/—á–∞—Å—Ç–æ—Ç—ã"></i>
                                                    </label>
                                                    <input type="number" class="form-control advanced-input" id="settingMtfScoreThreshold" min="0.1" max="1" step="0.05" value="0.65">
                                                    <small class="form-text text-muted">–ü–æ—Ä–æ–≥ MTF-—Å–∫–æ—Ä–∏–Ω–≥–∞ (0..1)</small>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="row mt-3">
                                            <div class="col-12">
                                                <button class="btn btn-warning" id="resetToProfileBtn">
                                                    <i class="bi bi-arrow-clockwise"></i> –°–±—Ä–æ—Å–∏—Ç—å –Ω–∞ –∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è
                                                </button>
                                                <small class="form-text text-muted d-block mt-2">
                                                    –°–±—Ä–æ—Å –ø—Ä–∏–º–µ–Ω–∏—Ç –∑–Ω–∞—á–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–≥–æ —Ä–∏—Å–∫-–ø—Ä–æ—Ñ–∏–ª—è –∫ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º
                                                </small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Actions Row (moved to bottom) -->
                    <div class="row mt-3">
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header bg-primary text-white">
                                    <h6 class="mb-0">–°—Ç–æ–ø—ã –∏ –ø—Ä–æ—Ñ–∏—Ç—ã</h6>
                                </div>
                                <div class="card-body">
                                    <div class="mb-3">
                                        <label class="form-label">
                                            Stop Loss (%)
                                            <i class="bi bi-question-circle text-muted" data-bs-toggle="tooltip" data-bs-placement="top" title="–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —É–±—ã—Ç–æ–∫ –ø–æ –ø–æ–∑–∏—Ü–∏–∏ –≤ % –æ—Ç –≤—Ö–æ–¥–∞. –°—Ç–æ–ø-–ª–æ—Å—Å —Ä–∞–∑–º–µ—â–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –≤—Ö–æ–¥–µ –≤ –ø–æ–∑–∏—Ü–∏—é"></i>
                                        </label>
                                        <input type="number" class="form-control" id="settingStopLoss" min="0.1" max="10" step="0.1">
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">
                                            Take Profit (%)
                                            <i class="bi bi-question-circle text-muted" data-bs-toggle="tooltip" data-bs-placement="top" title="–¶–µ–ª–µ–≤–æ–π –ø—Ä–æ—Ñ–∏—Ç –≤ % –æ—Ç –≤—Ö–æ–¥–∞. –¢–µ–π–∫-–ø—Ä–æ—Ñ–∏—Ç —Ä–∞–∑–º–µ—â–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–ª—è —Ñ–∏–∫—Å–∞—Ü–∏–∏ –ø—Ä–∏–±—ã–ª–∏ –ø–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ —Ü–µ–ª–∏"></i>
                                        </label>
                                        <input type="number" class="form-control" id="settingTakeProfit" min="0.1" max="50" step="0.1">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header bg-primary text-white">
                                    <h6 class="mb-0">–î–µ–π—Å—Ç–≤–∏—è</h6>
                                </div>
                                <div class="card-body">
                                    <button class="btn btn-success w-100 mb-2" id="savSettingsBtn">
                                        <i class="bi bi-check"></i> –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
                                    </button>
                                    <button class="btn btn-warning w-100" id="resetSettingsBtn">
                                        <i class="bi bi-arrow-clockwise"></i> –°–±—Ä–æ—Å–∏—Ç—å –Ω–∞ –¥–µ—Ñ–æ–ª—Ç—ã
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- HISTORY TAB -->
                <div id="history" class="tab-content" style="display: none;">
                    <h2 class="mb-4">–ò—Å—Ç–æ—Ä–∏—è —Ç–æ—Ä–≥–æ–≤–ª–∏</h2>

                    <ul class="nav nav-tabs mb-3" role="tablist">
                        <li class="nav-item">
                            <a class="nav-link active" data-bs-toggle="tab" href="#signaslTab">–°–∏–≥–Ω–∞–ª—ã</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-bs-toggle="tab" href="#ordersTab">–û—Ä–¥–µ—Ä–∞</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-bs-toggle="tab" href="#executionsTab">–ò—Å–ø–æ–ª–Ω–µ–Ω–∏—è</a>
                        </li>
                    </ul>

                    <div class="tab-content">
                        <!-- –°–∏–≥–Ω–∞–ª—ã -->
                        <div id="signaslTab" class="tab-pane fade show active">
                            <div class="table-responsive">
                                <table class="table table-sm table-hover">
                                    <thead class="table-dark">
                                        <tr>
                                            <th>–í—Ä–µ–º—è</th>
                                            <th>–°—Ç—Ä–∞—Ç–µ–≥–∏—è</th>
                                            <th>–°–∏–º–≤–æ–ª</th>
                                            <th>–¢–∏–ø</th>
                                            <th>–¶–µ–Ω–∞</th>
                                        </tr>
                                    </thead>
                                    <tbody id="signalsTable">
                                        <tr>
                                            <td colspan="5" class="text-center text-muted">–ó–∞–≥—Ä—É–∑–∫–∞...</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <!-- –û—Ä–¥–µ—Ä–∞ -->
                        <div id="ordersTab" class="tab-pane fade">
                            <div class="table-responsive">
                                <table class="table table-sm table-hover">
                                    <thead class="table-dark">
                                        <tr>
                                            <th>ID</th>
                                            <th>–°–∏–º–≤–æ–ª</th>
                                            <th>–°—Ç–æ—Ä–æ–Ω–∞</th>
                                            <th>–¢–∏–ø</th>
                                            <th>–¶–µ–Ω–∞</th>
                                            <th>–ö–æ–ª-–≤–æ</th>
                                            <th>–°—Ç–∞—Ç—É—Å</th>
                                        </tr>
                                    </thead>
                                    <tbody id="ordersTable">
                                        <tr>
                                            <td colspan="7" class="text-center text-muted">–ó–∞–≥—Ä—É–∑–∫–∞...</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <!-- –ò—Å–ø–æ–ª–Ω–µ–Ω–∏—è -->
                        <div id="executionsTab" class="tab-pane fade">
                            <div class="table-responsive">
                                <table class="table table-sm table-hover">
                                    <thead class="table-dark">
                                        <tr>
                                            <th>ID</th>
                                            <th>–°–∏–º–≤–æ–ª</th>
                                            <th>–°—Ç–æ—Ä–æ–Ω–∞</th>
                                            <th>–¶–µ–Ω–∞</th>
                                            <th>–ö–æ–ª-–≤–æ</th>
                                            <th>–ö–æ–º–∏—Å—Å–∏—è</th>
                                            <th>–í—Ä–µ–º—è</th>
                                        </tr>
                                    </thead>
                                    <tbody id="executionsTable">
                                        <tr>
                                            <td colspan="7" class="text-center text-muted">–ó–∞–≥—Ä—É–∑–∫–∞...</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- SIGNALS LOG TAB -->
                <div id="signals-log" class="tab-content" style="display: none;">
                    <h2 class="mb-4">
                        <i class="bi bi-bug"></i> –õ–æ–≥–∏ –°–∏–≥–Ω–∞–ª–æ–≤ - –û—Ç–ª–∞–¥–∫–∞
                    </h2>
                    
                    <div class="alert alert-info mb-4">
                        <strong>üí° –°–æ–≤–µ—Ç:</strong> –ó–¥–µ—Å—å –≤—ã –≤–∏–¥–∏—Ç–µ –í–°–ï —Å–∏–≥–Ω–∞–ª—ã —Å –∏—Ö —Å—Ç–∞—Ç—É—Å–æ–º (–ø—Ä–∏–Ω—è—Ç—ã/–æ—Ç–∫–ª–æ–Ω–µ–Ω—ã) –∏ –ø—Ä–∏—á–∏–Ω–∞–º–∏. 
                        –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏, –µ—Å–ª–∏ –æ—Ä–¥–µ—Ä–∞ –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è.
                    </div>

                    <div class="row mb-3">
                        <div class="col-md-6">
                            <div class="input-group">
                                <select class="form-control" id="signalLogLevel">
                                    <option value="all">–í—Å–µ –ª–æ–≥–∏</option>
                                    <option value="info">–¢–æ–ª—å–∫–æ —É—Å–ø–µ—à–Ω—ã–µ</option>
                                    <option value="warning">–¢–æ–ª—å–∫–æ –æ—Ç–∫–ª–æ–Ω–µ–Ω–Ω—ã–µ</option>
                                    <option value="error">–¢–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏</option>
                                </select>
                                <button class="btn btn-outline-secondary" onclick="loadSignalLogs()">
                                    <i class="bi bi-arrow-clockwise"></i> –û–±–Ω–æ–≤–∏—Ç—å
                                </button>
                                <button class="btn btn-outline-danger" onclick="clearSignalLogs()">
                                    <i class="bi bi-trash"></i> –û—á–∏—Å—Ç–∏—Ç—å
                                </button>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="input-group">
                                <input type="number" class="form-control" id="signalLogLimit" value="50" min="10" max="500" placeholder="–ö–æ–ª-–≤–æ –ª–æ–≥–æ–≤">
                                <button class="btn btn-outline-secondary" onclick="loadSignalLogs()">–ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <strong>–õ–æ–≥–∏ —Å–∏–≥–Ω–∞–ª–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏</strong>
                            <span class="badge bg-secondary float-end" id="signalLogCount">0 –ª–æ–≥–æ–≤</span>
                        </div>
                        <div class="card-body" style="max-height: 600px; overflow-y: auto; background-color: #1e1e1e;">
                            <div id="signalLogsContainer">
                                <p class="text-muted">–ó–∞–≥—Ä—É–∑–∫–∞ –ª–æ–≥–æ–≤...</p>
                            </div>
                        </div>
                    </div>

                    <div class="mt-3 alert alert-secondary">
                        <strong>üìã –ß—Ç–æ —Å–º–æ—Ç—Ä–µ—Ç—å:</strong>
                        <ul class="mb-0 mt-2">
                            <li><code class="text-success">‚úÖ SIGNAL GENERATED</code> - –°—Ç—Ä–∞—Ç–µ–≥–∏—è —Å–æ–∑–¥–∞–ª–∞ —Å–∏–≥–Ω–∞–ª</li>
                            <li><code class="text-success">‚úÖ SIGNAL ACCEPTED</code> - –°–∏–≥–Ω–∞–ª –ø—Ä–æ—à–µ–ª –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ –æ—Ä–¥–µ—Ä –æ—Ç–∫—Ä—ã—Ç</li>
                            <li><code class="text-danger">‚ùå SIGNAL REJECTED</code> - –°–∏–≥–Ω–∞–ª –æ—Ç–∫–ª–æ–Ω–µ–Ω (–ø—Ä–∏—á–∏–Ω–∞ –≤ –ª–æ–≥–µ)</li>
                            <li><code class="text-danger">‚ùå ORDER EXEC FAILED</code> - –û—Ä–¥–µ—Ä –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω (–ø—Ä–∏—á–∏–Ω–∞ –≤ –ª–æ–≥–µ)</li>
                        </ul>
                    </div>
                </div>

                <!-- ACCOUNT TAB -->
                <div id="account" class="tab-content" style="display: none;">
                    <h2 class="mb-4">–ê–∫–∫–∞—É–Ω—Ç</h2>

                    <div class="row mb-4">
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header bg-primary text-white">
                                    <h6 class="mb-0">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∞–∫–∫–∞—É–Ω—Ç–∞</h6>
                                </div>
                                <div class="card-body" id="accountInfo">
                                    <p class="text-muted">–ó–∞–≥—Ä—É–∑–∫–∞...</p>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header bg-primary text-white">
                                    <h6 class="mb-0">–ë–∞–ª–∞–Ω—Å—ã</h6>
                                </div>
                                <div class="card-body" id="balanceInfo">
                                    <p class="text-muted">–ó–∞–≥—Ä—É–∑–∫–∞...</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header bg-primary text-white">
                            <h6 class="mb-0">–û—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ–∑–∏—Ü–∏–∏</h6>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-sm table-hover">
                                    <thead class="table-dark">
                                        <tr>
                                            <th>–°–∏–º–≤–æ–ª</th>
                                            <th>–°—Ç–æ—Ä–æ–Ω–∞</th>
                                            <th>–†–∞–∑–º–µ—Ä</th>
                                            <th>–¶–µ–Ω–∞ –≤—Ö–æ–¥–∞</th>
                                            <th>–¢–µ–∫—É—â–∞—è —Ü–µ–Ω–∞</th>
                                            <th>PnL</th>
                                            <th>PnL %</th>
                                        </tr>
                                    </thead>
                                    <tbody id="positionsTable">
                                        <tr>
                                            <td colspan="7" class="text-center text-muted">–ù–µ—Ç –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/static/js/app.js"></script>
</body>
</html>
